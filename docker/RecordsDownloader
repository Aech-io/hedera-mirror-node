# Pull base image.
FROM ubuntu:latest

# Install Java
RUN apt-get update && apt-get install -y default-jre

RUN mkdir -p /config
RUN mkdir -p /lib
RUN mkdir -p /mirrordata

ADD ./target/lib ./lib
ADD ./target/mirrorNode.jar mirrorNode.jar

# nodes configuration
ADD ./config/0.0.102 ./config/0.0.102
ADD ./config/nodesInfo.json ./config/nodesInfo.json

# general mirror node configuration
ADD ./config/config.json ./config/config.json

# log configuration
ADD ./config/log4j2.xml log4j2.xml

CMD java -Dlog4j.configurationFile=./log4j2.xml -cp mirrorNode.jar com.hedera.downloader.RecordFileDownloader
